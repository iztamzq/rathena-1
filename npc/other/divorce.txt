//===== rAthena Script ======================================= 
//= Divorcing Deviruchi
//===== By: ================================================== 
//= Perkka, Scriptor, LightFighter
//= L0ne_W0lf
//===== Current Version: ===================================== 
//= 1.5
//===== Compatible With: ===================================== 
//= rAthena Project
//===== Description: ========================================= 
//= [Official Conversion]
//= Official Divorce script.
//= Added isloggedin() check, even though Aegis doesn't do it;
//= should be able to divorce even when the spouse is not online.
//===== Additional Comments: ================================= 
//= Both players should be online to get divorced
//= Fixed menu [Lupus]
//= 1.1 Added check if the patner's online, added effects [Lupus]
//= 1.2 Updated to Aegis 10.3 standards. [L0ne_W0lf]
//= 1.2a Commented out check of 'wedding_sign' to let
//=     old married players divorcing, optimized, fixed a bug [Lupus]
//= 1.3 Wedding variable 'wedding_sign' is now unset on divorce. [L0ne_W0lf]
//= 1.4 Removed ifpartneron check, fixed typo in percentheal. [L0ne_W0lf]
//= 1.5 Replaced effect numerics with constants. [L0ne_W0lf]
//============================================================ 

nif_in,190,112,5	script	Deviruchi#divorce	738,{
	mes "[Deviruchi]";
//	if (wedding_sign == 0) {
//		mes "��� ���...";
//		mes "���˹��˴���.";
//		mes "��Ҥ�����֡�˧�.";
//		mes "���������ҷء��";
//		mes "��ͧ����֡����͹���.";
//		next;
//		mes "[Deviruchi]";
//		mes "�������˧�,";
//		mes "��������ͧ����§�ѵ���� ?";
//		mes "������Թ�����";
//		mes "�ѹ�繷������ش�, ��� ���~";
//		close;
//	}
//	else 
  	if (!getpartnerid()) {
		mes "�� �� ���~!";
		mes "�ͧ����㹹�µ�Ңͧ���~!";
		if (Sex == SEX_MALE) {
			mes "�ѹ����µҷ��";
			mes "������˧���ҹ�鹷�������͡����.";
			mes "������� 100 ���繵����";
			mes "��������١�ʹ���.";
		}
		else {
			mes "�ǡ�����仴���";
			mes "�����纻Ǵ�ҡ���ѡ���--!";
			mes "����觷���ҼԴ��ѧ";
			mes "�ҡ����觧ҹ, ��� ?";
		}
		next;
		mes "[Deviruchi]";
		mes "5555555~!";
		mes "�������...��� ���~";
		mes "��Ҩ����͡���� ���,";
		mes "������, ��Ң���������Ҩ";
		mes "�ҡ�����״.";
		close;
	}
	mes "��Ҵ�������ҡ...";
	mes "⪤�բͧ���, ��Ҵ���";
	mes "����ǡѺ�����آ�ͧ��餹...";
	mes "���������ѧ�ͧ������";
	mes "�ѹ�������ʹ�.";
	mes "5555555~!";
	next;
	mes "[Deviruchi]";
	mes "�������֡������ạ";
	mes "��������˹������...";
	mes "��Ң�������Դ, �����";
	if (Sex == SEX_MALE)
		mes "����, ����� ?";
	else
		mes "�����, ����� ?";
	next;
	mes "[Deviruchi]";
	mes "����Ҷ������ѡ����ͧ˹��.";
	mes "����դ����آ�ҡ����觧ҹ��� ?";
	mes "��������Ѻ�Դ�ͺ,";
	mes "����������ԡ �����������������";
	mes "����Ѻ�͹���.";
	next;
	mes "[Deviruchi]";
	mes "������¶֧, ��Ѻ���ʴ";
	mes "��餹�����Ѻ��";
	mes "�դ����آ ? ���������";
	mes "����觧ҹ����觷����������ѹ��";
	mes "�Ƿ������觤����ѡ, ��...";
	next;
	mes "[Deviruchi]";
	mes "�ش��������, ������";
	mes "����ѡ�ͧ���, ���ŧ��¡ѹ";
	mes "���������.";
	if (Sex == SEX_MALE)
		mes "...�ѹ��������.";
	else
		mes "...�ѹ��������.";
	next;
	mes "[Deviruchi]";
	mes "��, ⪤�еҷ��������͢��";
	mes "�ǡ�����ǹ��ӼԴ...";
	mes "�������٭����";
	mes "�����ѡ, ��������Ҩзӵ���ӻ�ԭҳ...";
	mes "�������ö�Ŵ������������������";
	mes "�ҡ����觧ҹ��.";
	next;
	mes "[Deviruchi]";
	mes "�ѹ�����ҡ���������";
	mes "�ѭ�Ңͧ����觧ҹ...";
	mes "�ѭ�Ҩ�����شŧ";
	mes "��Ҥ���ѡ���.�����";
	mes "Nifleheim, �ѹ��������ҡ";
	mes "�ʶҹ�����...";
	next;
	mes "[Deviruchi]";
	mes "*��ЫԺ*";
	mes "^555555�����������繤��Դ�ѭ����͡^000000";
	if (Sex == SEX_MALE) {
		mes "^555555���ѭ��, ���������";
		mes "����͹����Ңͧ��Ҩ���� �����";
		mes "������... �������";
		mes "����ͧ������Шҡ�ʹ��� ?^000000";
	}
	else {
		mes "^555555�ѭ����. ��, ���բͧ���";
		mes "����շҧ���";
		mes "����ǡѺ�ѹ��͡... ��������ҡ";
		mes "�դ����آ��ԧ�, ��� ?^000000";
	}
	next;
	mes "[Deviruchi]";
	mes "�������ö���ѡ����������";
	mes "�Ѻ�����ա���...";
	mes "������͡��觷��շ���ش��...?";
	mes "��Ҫ������������ҵ�ͧ���...";
	mes "��ҷ�����ѹ�繨�ԧ��!";
	next;
	if (select("������, ����դ����آ��.:�������, �ͤ�����سҴ���.") == 1) {
		mes "[Deviruchi]";
		mes "���~! ����ѧ��";
		mes "����㹤����ѡ���";
		mes "�ͧ��������ա���. ������,";
		mes "�����ҤԴ����դ����آ��,";
		mes "��鹢�ҡ����������";
		mes "������ǹҡѺ���--!";
		close2;
		warp "niflheim",169,162;
		end;
	}
	mes "[Deviruchi]";
	mes "��, ��...";
	mes "�͹�����ҵ�ͧ��";
	mes "����š����¹�Ѻ��Ҥ��...";
	mes "�Թ 2,500,000 zeny ���...*�� �� ��!*";
	mes "^666666����ԭ�ҳ�ͧ�����硹���.^000000";
	next;
	mes "[Deviruchi]";
	mes "��ѧ�ҡ���, �ѹ����������Ҿ";
	mes "���Ե���ʴ. ���������";
	mes "�����觷������ҡ�͡...";
	next;
	if (select("...������Ң�ҤԴ��͹.:������ù�, �ô��������ҷ�!") == 1) {
		mes "[Deviruchi]";
		mes "�������. ������ҤԴ";
		mes "���ǤԴ�ա, ������...";
		if (Sex == SEX_MALE) {
			mes "����Ң��蹢ͧ���, ����";
			mes "���ԸըѺ���";
			mes "������ǹ";
			mes "�ѧ������Ҿ�ͧ������~";
		}
		else {
			mes "���շ���ҡ��Ǣͧ���,";
			mes "�����ѧ����Ե";
			mes "���ҧ�����������~";
		}
		close;
	}
	mes "[Deviruchi]";
	if (Zeny > 2499999) {
		mes "���͡��������~";
		mes "��������ѹ��´ա���";
		mes "㹺ҧ���駺ҧ����";
		mes "��觷��շ���ش";
		mes "�ͧ����觧ҹ����������ѧ";
		mes "^FF0000��͡�þѡ��͹���ҧʧ�.^000000";
		next;
		specialeffect EF_MAGICROD;
		specialeffect2 EF_DEVIL;
		set wedding_sign,0;
		set Zeny, Zeny-2500000;
		percentheal -100,-100;
		divorce;
		mes "[Deviruchi]";
		mes "�� �� ���~!";
		mes "�͹�����������������~!";
		mes "����Ҥ��������֡�����ա����";
		mes "⪤�շ��͹���������ʴ ?";
		mes "���, �ʴ���ҧⴴ�����...";
		close;
	}
	mes "�����...��Һ͡�����ҹ��Թ";
	mes "2,500,000 zeny ��, ����� ?";
	mes "�����������ö";
	mes "�������ҿ�����͡���...";
	mes "��ҵ�ͧ������š����¹����";
	mes "������������, ����� ?";
	close;
}
